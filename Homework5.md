# 作业五

## 1. cache

| 序列 | 地址                                         | 命中率 |
| ---- | -------------------------------------------- | ------ |
| 1    | 0, 2, 4, 8, 16, 32                           | 0.33   |
| 2    | 0, 512, 1024, 1536, 2048, 1536, 1024, 512, 0 | 0.33   |
| 3    | 0, 64, 128, 256, 512, 256, 128, 64, 0        | 0.33   |
| 4    | 0, 512, 1024, 0, 1536, 0, 2048, 512          | 0.25   |

上面给出了运行在带数据 cache 的处理器上的程序所生成的四种不同的地址序列，同时给出了每种序 列的 cache 命中率。假设 cache 在每个序列开始时是空的，请回答该处理器数据 cache 的下述参数分别是多少：

- 相联度(1, 2 还是 4 路) 

  4路。根据序列3，无论何种情况它们都应映射到统一组中，只有组中有4路时才会达到0.33的命中率。

- 块大小(1, 2, 4, 8, 16 还是 32 字节)

  8字节。根据序列1，只有块大小是8字节时能够达成0.33的命中率。

- cache 总容量(256 还是 512 字节) 

  都可以。

- 替换策略(LRU 还是 FIFO) 

  LRU，根据序列4，使用FIFO时命中率大于0.25。

## 2. 内存的交叉存取

### 2.1 

一台机器有 4 KB 的主存，由 1 个通道、1 个 rank 和 N(N>1)个 bank 构成。系统没有虚拟存储。 

- 数据采用 cache 块交叉存取策略进行交叉存取，即连续的 cache 块对应到连续的 bank 上；
- cache 块大小为 32 字节，bank 的 1 行有 128 字节；
- 采用打开行策略，即行缓冲中的行在被访问后继续保持在行缓冲中，直到有别的行被访问； 
- 行缓冲命中指访问的行存在于行缓冲中，行缓冲缺失指访问的行不在行缓冲中。

1. 某个程序在这台机器上执行，访问以下字节时(数字表示字节的位置，比如 320 表示第 320 个字节) 发生片上 cache 缺失而需要访存：0, 32, 320, 480, 4, 36, 324, 484, 8, 40, 328, 488, 12, 44, 332, 492，若行缓冲命中率为 0，即所有访问的行都不在行缓冲中，请问 bank 数 N 的最小值是多少? 

   

2. 如果对于同一个序列，行缓冲命中率是 75%，请问 bank 数 N 的最小值是多少? 

3. 对于同一序列，行缓冲的命中率能达到 100%吗? 请解释原因；如果能达到, 最少需要多少 bank 才能够获得 100%的行缓冲命中率? 